---
import { Phone, Star, MapPin, Menu, MessageCircle, X } from "@lucide/astro";

const navItems = [
    { name: "Home", href: "/" },
    { name: "Diensten", href: "/diensten" },
    { name: "Over Ons", href: "/over-ons" },
    { name: "Reviews", href: "/#reviews" },
    { name: "Contact", href: "/contact" },
];
---

<header
    class="fixed w-full top-0 z-50 bg-white/95 backdrop-blur-sm shadow-sm transition-all duration-300"
>
    <!-- Top Bar -->
    <div class="bg-navy text-white text-xs py-2">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="hidden sm:flex items-center gap-1.5">
                    <MapPin class="w-3.5 h-3.5 text-primary" />
                    <span>Betuwe & Omgeving</span>
                </div>
                <a href="https://www.google.com/search?q=johns+glazenwassersbedrijf" target="_blank" rel="noopener noreferrer" class="flex items-center gap-1.5 hover:text-accent transition-colors">
                    <div class="flex text-accent">
                        <Star class="w-3.5 h-3.5 fill-current" />
                        <Star class="w-3.5 h-3.5 fill-current" />
                        <Star class="w-3.5 h-3.5 fill-current" />
                        <Star class="w-3.5 h-3.5 fill-current" />
                        <span class="relative inline-block w-3.5 h-3.5 overflow-hidden">
                            <Star class="w-3.5 h-3.5 fill-current absolute left-0 top-0" style="clip-path: inset(0 50% 0 0);" />
                            <Star class="w-3.5 h-3.5 stroke-current fill-transparent absolute left-0 top-0" />
                        </span>
                    </div>
                    <span><strong>4.5/5</strong> op Google</span>
                </a>
            </div>
            <div class="flex items-center gap-1 sm:gap-3">
                <a
                    href="tel:0623545276"
                    class="flex items-center gap-1.5 font-bold hover:text-primary transition-colors p-2 -m-2 sm:p-0 sm:m-0"
                    aria-label="Bel ons: 06 23 54 52 76"
                >
                    <Phone class="w-5 h-5 sm:w-3.5 sm:h-3.5" />
                    <span class="hidden sm:inline">06 23545276</span>
                </a>
                <a
                    href="https://wa.me/31623545276"
                    target="_blank"
                    rel="noopener noreferrer"
                    class="flex items-center gap-1.5 font-bold hover:text-primary transition-colors p-2 -m-2 sm:p-0 sm:m-0"
                    aria-label="Stuur ons een WhatsApp bericht"
                >
                    <MessageCircle class="w-5 h-5 sm:w-3.5 sm:h-3.5" />
                    <span class="hidden sm:inline">WhatsApp</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Main Navigation -->
    <div class="container mx-auto px-4 py-4">
        <nav class="flex items-center justify-between">
            <!-- Logo -->
            <a
                href="/"
                class="text-sm sm:text-xl md:text-2xl font-heading font-extrabold text-navy tracking-tight leading-tight"
            >
                John's Glazenwassersbedrijf<span class="text-primary">.</span>
            </a>

            <!-- Desktop Menu -->
            <ul class="hidden md:flex items-center space-x-8 font-medium">
                {
                    navItems.map((item) => (
                        <li>
                            <a
                                href={item.href}
                                class="text-navy hover:text-primary transition-colors"
                            >
                                {item.name}
                            </a>
                        </li>
                    ))
                }
            </ul>

            <!-- CTA Button -->
            <a
                href="/offerte"
                class="hidden md:inline-block bg-accent hover:bg-accent-dark text-navy font-bold py-2 px-5 rounded-lg shadow-md transition-all hover:-translate-y-0.5"
            >
                Bereken je prijs
            </a>

            <!-- Mobile Menu Button -->
            <button
                id="mobile-menu-button"
                class="md:hidden text-navy p-2"
                aria-expanded="false"
                aria-controls="mobile-menu"
            >
                <span class="sr-only">Menu openen</span>
                <Menu id="menu-icon-open" class="w-8 h-8" />
                <X id="menu-icon-close" class="w-8 h-8 hidden" />
            </button>
        </nav>
    </div>

    <!-- Mobile Menu Drawer -->
    <div
        id="mobile-menu"
        class="md:hidden hidden bg-white border-t border-gray-100 shadow-lg"
    >
        <nav class="container mx-auto px-4 py-4">
            <ul class="space-y-1">
                {
                    navItems.map((item) => (
                        <li>
                            <a
                                href={item.href}
                                class="block py-3 px-4 text-navy hover:bg-gray-50 hover:text-primary rounded-lg transition-colors font-medium"
                            >
                                {item.name}
                            </a>
                        </li>
                    ))
                }
            </ul>
            <div class="mt-4 pt-4 border-t border-gray-100">
                <a
                    href="/offerte"
                    class="block w-full bg-accent hover:bg-accent-dark text-navy font-bold py-3 px-5 rounded-lg shadow-md transition-all text-center"
                >
                    Bereken je prijs
                </a>
            </div>
        </nav>
    </div>
</header>

<script>
    const menuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    const iconOpen = document.getElementById('menu-icon-open');
    const iconClose = document.getElementById('menu-icon-close');

    menuButton?.addEventListener('click', () => {
        const isExpanded = menuButton.getAttribute('aria-expanded') === 'true';

        menuButton.setAttribute('aria-expanded', (!isExpanded).toString());
        mobileMenu?.classList.toggle('hidden');
        iconOpen?.classList.toggle('hidden');
        iconClose?.classList.toggle('hidden');
    });

    // Close menu when clicking a link
    mobileMenu?.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            mobileMenu.classList.add('hidden');
            menuButton?.setAttribute('aria-expanded', 'false');
            iconOpen?.classList.remove('hidden');
            iconClose?.classList.add('hidden');
        });
    });
</script>
